% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tests.R
\name{fake_board_connect}
\alias{fake_board_connect}
\alias{connect_fixture}
\alias{fixture_df}
\alias{connect_recording}
\title{Connect testing utilities}
\usage{
fake_board_connect(
  account = "user_a",
  url = "https://connect.example.com",
  key = "fake-key-a"
)

connect_fixture(name, record = NULL)

fixture_df(rows)

connect_recording()
}
\arguments{
\item{account}{Connect username for the mock board.}

\item{url}{Connect server URL for the mock board.}

\item{key}{API key for the mock board.}

\item{name}{Unique fixture name (e.g. \code{"pin_search"}). Determines the
JSON filename under \verb{tests/testthat/fixtures/connect/}.}

\item{record}{A zero-argument function that produces the value to
record. Only called when \code{\link[=connect_recording]{connect_recording()}} is \code{TRUE}. Ignored
during playback.}

\item{rows}{A list of row-lists as returned by \code{\link[=connect_fixture]{connect_fixture()}}
for a data.frame fixture. Each element represents one row.}
}
\value{
\code{fake_board_connect()} returns an S3 object of class
\code{c("pins_board_connect", "pins_board")}.

\code{connect_fixture()} returns the recorded or replayed R object
as a list (parsed JSON with no simplification).

\code{fixture_df()} returns a data.frame. Scalar columns become
character vectors; complex columns become list-columns.

\code{connect_recording()} returns a scalar logical.
}
\description{
Utilities for testing code that interacts with Posit Connect via pins.
}
\details{
\code{fake_board_connect()} creates a mock board object with the correct S3
class hierarchy for dispatch without requiring a real server.

\code{connect_fixture()} records or replays a Connect return value as a JSON
fixture. When \code{connect_recording()} is \code{TRUE}, it evaluates \code{record()}
and saves the result; otherwise it loads from disk or skips.

\code{fixture_df()} converts a list of row-lists (as returned by
\code{connect_fixture()} for data.frame fixtures) into a proper data.frame,
preserving complex columns as list-columns.

\code{connect_recording()} returns \code{TRUE} when the \code{CONNECT_SERVER}
environment variable is set, indicating a real Connect server is
available for fixture recording.
}
